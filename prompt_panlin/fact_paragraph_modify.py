from datetime import datetime

today = datetime.now().strftime("%Y年%m月%d日")

fact_modification_prompt = f"""
# 简报事实部分修改指令

## 任务目标
根据检查结果和原始资料，精准修改事实部分中的错误内容，确保准确性和规范性。

## 当前时间
{today}

## 输入信息
- 原始资料：{{source_text}}
- 文章解读：{{interpreted_source}}
- 检查结果：{{check_result}}
- 待修改内容：{{content_draft}}
- 具体问题：{{specific_issues}}

## 修改原则

### 1. 精准修改（优先级最高）
- 仅修改检查结果中标识的错误内容
- 保持正确内容完全不变
- 确保修改后内容与原文完全一致

### 2. 事实准确性修正
- **数据修正**：确保数字、百分比、金额与原文完全一致
- **时间修正**：严格区分文章发表时间与事件发生时间
  - 事件时间：使用原文中的具体时间
  - 无明确时间：使用\"近日\"、\"近期\"、\"今年\"等相对时间
  - 避免误用文章发表时间作为事件时间
- **人物信息**：确保姓名、职位、机构准确
- **地理信息**：确保地名、区域表述准确
- **政策文件**：确保名称、条目完整准确

### 3. 格式规范修正
- **字数控制**：确保修改后内容在300-400字范围内
- **时间表述**：统一使用相对时间格式
- **数字格式**：使用阿拉伯数字
- **术语规范**：专业术语正确标注缩写
- **表述客观**：保持客观陈述，无感情色彩

### 4. 逻辑结构优化
- **MECE原则**：确保要点相互独立、完全穷尽
- **因果逻辑**：确保推理关系合理清晰
- **层次结构**：符合金字塔原理

## 特别修改要点

### 时间信息修正（重点关注）
1. **识别时间类型**：
   - 文章发表时间：不得用作事件发生时间
   - 事件发生时间：必须与原文一致
   - 相对时间：\"近日\"、\"近期\"、\"今年\"等

2. **时间修正规则**：
   - 有明确事件时间：使用原文具体时间
   - 无明确时间：使用相对时间表述
   - 时间逻辑错误：修正为合理时间表述
   - \"今年\"特指2025年，不是2024年

3. **第一句话时间处理**：
   - 仅当原文解读中包含明确发生日期时才包含具体时间
   - 否则使用\"近日\"、\"近期\"或不提及时间
   - 确保时间信息正确且表达自然

### 数据修正处理
1. **数值核对**：与原文逐一核对所有数字
2. **单位统一**：确保计量单位与原文一致
3. **精度保持**：保持原文的数值精确度
4. **来源标注**：重要数据需标注来源

### 政策文件修正
1. **名称完整**：政策文件名称必须完整
2. **条目齐全**：重要措施条目不得省略
3. **引用准确**：原文引用必须完整准确

## 修改流程

### 第一步：问题识别
- 分析检查结果中的具体问题
- 定位需要修改的具体位置
- 确定修改的优先级和范围

### 第二步：内容核实
- 对照原始资料核实正确信息
- 确认修改后的准确性
- 验证逻辑关系的合理性

### 第三步：精准修改
- 仅修改错误部分，保持其他内容不变
- 确保修改后语言自然流畅
- 保持原有的表达风格和习惯

### 第四步：质量检查
- 验证修改后内容的准确性
- 检查字数是否符合要求
- 确认格式规范性

## 输出要求

**重要：请将修改后的完整事实部分内容用XML标签包裹输出。**

### 输出规则：
1. **XML格式输出**：使用<fact_paragraph>标签包裹修改后的内容
2. **完整内容**：返回完整的事实部分，不是片段
3. **字数控制**：确保内容在300-400字范围内
4. **质量保证**：确保内容准确、逻辑清晰、表述规范
5. **无额外标记**：XML标签内只包含事实部分文本，无其他格式标记

### 输出格式：
```xml
<fact_paragraph>
[修改后的完整事实部分内容]
</fact_paragraph>
"""
